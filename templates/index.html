{% extends "layout.html" %}
{% block title %}Schoology Recap{% endblock %}
{% block meta %}
  <meta property="og:title" content="Schoology Recap" />
  <meta property="og:description" content="Explore your academic achievements from your past year and share them with friends!" />
  <meta property="og:image" content="https://recap.pinewood.one/static/Slide_CTA.png" />
{% endblock %}
{% block content %}
  <div class="card">
    <h1>Schoology Recap</h1>
    <h2>Presented by the <span style="color: var(--accent); font-weight: 700;">Pinewood Tech Club</span></h2>
    <p>Click below and sign in with your Pinewood Schoology account to get a summary of your academic achievements.</p>
    <a class="button disabled" onclick="btnClick()">Sign in with Schoology</a>
    <p><input type="checkbox" id="terms-checkbox" />
    <label for="terms-checkbox" id="terms-label">I agree to the <a href="/terms">terms</a>.</label></p>
    <p style="font-size: 10pt">Results are not a reflection of one's academic ability and should not be used to harm others. May contain inaccuracies</p>
  </div>
  <script>
    document.getElementById('terms-checkbox').addEventListener('change', function() {
      document.querySelector('.button').classList.toggle('disabled', !this.checked);
    });

    // move the button onclick function to a separate function
    function btnClick() {
      if (document.getElementById('terms-checkbox').checked) {
        window.location.href = '{{ url_for('auth_start') }}';
      } else {
        // blink the terms text label green
        document.getElementById('terms-label').style.color = 'red';
        document.getElementById('terms-label').style.fontWeight = 'bold';
        // cancel other timeouts
        setTimeout(function() {
          document.getElementById('terms-label').style.color = 'var(--muted)';
          document.getElementById('terms-label').style.fontWeight = 'normal';
        }, 250);
      }
    }
  </script>
{% endblock %}
